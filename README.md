# Urna blockchain

Um pequeno projeto para praticar conhecimentos em solidity.

## Como usar

1. Crie um projeto Hardhat normalmente
2. Salve o [`voting.sol`](./voting.sol) na sua pasta `contracts`.
3. Salve o [`interact-voting.js`](./interact-voting.js) na sua pasta `scripts`.
4. Salve o [`test-voting.js`](./test-voting.js) na sua pasta `test`.

Pronto, basta usar os comandos `npx hardhat coverage` para executar os testes e observar a cobertura.

## Preço da execução

Usando o [hardhat-gas-reporter](https://www.npmjs.com/package/hardhat-gas-reporter), temos os seguintes preços de execução. 

```bash
····················································································································
|  Solidity and Network Configuration                                                                              │
·······························|·················|···············|·················|································
|  Solidity: 0.8.24            ·  Optim: false   ·  Runs: 200    ·  viaIR: false   ·     Block: 30,000,000 gas     │
·······························|·················|···············|·················|································
|  Methods                                                                                                         │
·······························|·················|···············|·················|················|···············
|  Contracts / Methods         ·  Min            ·  Max          ·  Avg            ·  # calls       ·  usd (avg)   │
·······························|·················|···············|·················|················|···············
|  SimNaoVotos                 ·                                                                                   │
·······························|·················|···············|·················|················|···············
|      adicionaEleitor         ·         57,203  ·       74,135  ·         65,516  ·            43  ·           -  │
·······························|·················|···············|·················|················|···············
|      cadastrarVotacao        ·        131,934  ·      149,130  ·        141,337  ·            11  ·           -  │
·······························|·················|···············|·················|················|···············
|      editaDetalhesDeVotacao  ·              -  ·            -  ·         37,243  ·             1  ·           -  │
·······························|·················|···············|·················|················|···············
|      editaStatusDeVotacao    ·              -  ·            -  ·         35,034  ·             1  ·           -  │
·······························|·················|···············|·················|················|···············
|      excluiEleitor           ·              -  ·            -  ·         42,855  ·             1  ·           -  │
·······························|·················|···············|·················|················|···············
|      pause                   ·              -  ·            -  ·         45,684  ·             9  ·           -  │
·······························|·················|···············|·················|················|···············
|      unpause                 ·              -  ·            -  ·         23,784  ·             1  ·           -  │
·······························|·················|···············|·················|················|···············
|      votar                   ·         81,993  ·      111,659  ·         99,086  ·            23  ·           -  │
·······························|·················|···············|·················|················|···············
|  Deployments                                   ·                                 ·  % of limit    ·              │
·······························|·················|···············|·················|················|···············
|  SimNaoVotos                 ·              -  ·            -  ·      2,929,832  ·         9.8 %  ·           -  │
·······························|·················|···············|·················|················|···············
|  Key                                                                                                             │
····················································································································
|  ◯  Execution gas for this method does not include intrinsic gas overhead                                        │
····················································································································
|  △  Cost was non-zero but below the precision setting for the currency display (see options)                     │
····················································································································
|  Toolchain:  hardhat                                                                                             │
····················································································································
```

Por comparação, com o preço atual (18/05/2024) de [15,878 reais](https://www.google.com/search?client=firefox-b-d&q=ether+price) por ether e de [6 gwei](https://etherscan.io/gastracker) por gas, custaria em torno de 13 reais para executar a função `cadastrarVotacao` e  276,3 reais para implementar na rede Ethereum.

Tornar o uso de gas mais eficiente é o próximo passo.
